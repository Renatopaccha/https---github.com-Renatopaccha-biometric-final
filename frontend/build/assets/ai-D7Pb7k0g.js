import{c as n}from"./index-NOo0oCgA.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],u=n("message-square",c),a="http://localhost:8000";async function i(t){return new Promise((e,r)=>{const s=new FileReader;s.onload=()=>{const o=s.result.split(",")[1];e({name:t.name,mime_type:t.type||"application/octet-stream",data:o})},s.onerror=r,s.readAsDataURL(t)})}async function f(t){try{let e=[];t.files&&t.files.length>0&&(e=await Promise.all(t.files.map(s=>i(s))));const r=await fetch(`${a}/api/v1/ai/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:t.session_id,chat_id:t.chat_id,message:t.message,history:t.history,attachments:e.length>0?e:[]}),signal:AbortSignal.timeout(6e4)});if(!r.ok){const s=await r.json().catch(()=>({detail:"Unknown error"}));throw new Error(s.detail||`HTTP ${r.status}`)}return await r.json()}catch(e){return console.error("AI chat error:",e),{success:!1,response:"No se pudo conectar con el asistente AI. Verifica tu conexi√≥n.",session_context_used:!1,files_processed:0,error:e instanceof Error?e.message:"Unknown error"}}}async function w(t){try{const e=await fetch(`${a}/api/v1/ai/chats/${t}`);if(!e.ok)throw new Error(`HTTP ${e.status}`);return await e.json()}catch(e){return console.error("List chats error:",e),[]}}async function m(t,e){try{const r=await fetch(`${a}/api/v1/ai/chats/${t}/${e}`);if(!r.ok)throw new Error(`HTTP ${r.status}`);return await r.json()}catch(r){return console.error("Get chat history error:",r),null}}async function d(t,e){try{const r=await fetch(`${a}/api/v1/ai/chats/${t}/${e}`,{method:"DELETE"});if(!r.ok)throw new Error(`HTTP ${r.status}`);return!0}catch(r){return console.error("Delete chat error:",r),!1}}export{u as M,d,m as g,w as l,f as s};
